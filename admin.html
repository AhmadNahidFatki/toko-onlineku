<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <title>Admin - Kelola Produk & Pengguna</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1><a href="index.html" class="site-title">Admin - Produk & Pengguna</a></h1>
    <div class="header-actions">
      <span id="user-info"></span>
      <button id="login-btn">Login</button>
      <a id="register-link" class="register-link" href="register.html">Daftar</a>
    </div>
  </header>

  <main class="admin-page">
    <div class="admin-panel">
      <h2>Tambah / Edit Produk</h2>
      <input id="p-id" type="hidden" />
      <input id="p-name" placeholder="Nama produk" />
      <input id="p-price" placeholder="Harga (angka)" />
      <input id="p-stock" placeholder="Stok (angka)" />
      <textarea id="p-desc" placeholder="Deskripsi produk"></textarea>

      <div>
        <label>Gambar (file atau URL):</label>
        <input id="p-image-file" type="file" accept="image/*" />
        <input id="p-image-url" placeholder="atau URL gambar" />
      </div>

      <div style="margin-top:8px">
        <button onclick="saveProduct()" class="btn-primary">Simpan Produk</button>
        <button onclick="resetProductForm()" class="btn-muted">Reset</button>
      </div>

      <h3 style="margin-top:18px">Daftar Produk</h3>
      <div id="admin-products" class="admin-products"></div>

      <hr style="margin:18px 0">

      <h2>Kelola Pengguna & Roles</h2>
      <p style="color:#555; font-size:0.95em">Hanya admin dapat melihat dan mengubah pengguna. Manager dapat mengelola produk tetapi tidak pengguna.</p>

      <div style="display:flex;gap:12px;align-items:center;margin-bottom:10px">
        <button onclick="renderAdminUsers()" class="btn-primary">Refresh Daftar Pengguna</button>
        <button onclick="exportUsers()" class="btn-muted">Export Users (JSON)</button>
        <input id="import-users-file" type="file" accept=".json" style="display:inline-block" />
        <select id="import-mode">
          <option value="merge">Merge (overwrite existing usernames)</option>
          <option value="replace">Replace semua users</option>
        </select>
        <button onclick="importUsers()" class="btn-primary">Import</button>
      </div>

      <div id="admin-users" class="admin-users" style="margin-top:10px"></div>
    </div>
  </main>

  <footer>
    &copy; 2026 Toko Online Sederhana
  </footer>

  <div id="toast" class="toast"></div>
  <script src="script.js"></script>

  <!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/6958fcba6200a1197c1e9ce9/1je1pmeig';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
</body>
</html>